{"componentChunkName":"component---src-templates-post-template-js","path":"/scheduling-aws-ec2-instances-on-elastic-beanstalk/","webpackCompilationHash":"2c4e89c3fdbc0d7e78bf","result":{"data":{"post":{"html":"<p>This guide is going to show you a simple way to schedule your AWS EC2 instances for applications using Elastic Beanstalk. Doing this allows you to <strong>reduce your AWS bill</strong> by minimizing the amount of time you run your instances.</p>\n<p>This can be useful if you have a separate environment that runs periodic jobs. In my case, I only needed to run the matching algorithm job for my side project <a href=\"https://www.festtribe.com\">Fest Tribe</a> once a day. I have a separate worker environment (named <code class=\"language-text\">festtribe-worker</code>) that runs this job so that I don’t slow down the application that users visit.</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 690px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 54.27380125086866%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABlklEQVQoz41QXW/TQBD0b0a8pKitC4WUNvC7ED8A8Y4TLKuJP8/2ffiGm03WahEPnLTa83hvdmay/MMWd9uvyD/ucHP/hKt8i+v7Hd7dPV7qM65SbfLUpR7kfpvm809fsHm/w5vrJ7y9ecTm9gFZOwZMNsDYBcPQo+taBO+kluARloj/OcHN0rPnUwMfFphpRtu2aJoG4zjCOgdrHbwPCOl/CGEt6wKG0aJra+yrBt9/Vvj24wCXZjOS8DhrhcymviyLYDFGGDPIAmJaXHY61Qk36IcRz+2EUz/L4myaJnnMXuz3KMtS7t57eVzXNQ6HA/q+X+35RFhVVYrIwDmbNp8FUL0o5IUEvHddJ4+NMYKTsNgX+FUUolQfxr+iXRKwEpJMD22qZc2MmEuqiMd4zlNI0rfiOpvFyypmR1Ukp2UdGBLWtI0oZcYkYNEF+zzP6yyJV0KSlOVvsaxbeTRDLjsrjLKUGR6PR/RpXoW8UqgZjomYWLxkoiQvS2PQ7P+pkD8Y+kvLig3DIEXlxNUy7aplzjrn8QcGqUBDis7OPgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"AWS Config Dashboard\"\n        title=\"\"\n        src=\"/static/festtribe-worker-config-dashboard-1564faa54d0e75f0e1c6ed264c64a131-ad1f0.png\"\n        srcset=\"/static/festtribe-worker-config-dashboard-1564faa54d0e75f0e1c6ed264c64a131-71707.png 173w,\n/static/festtribe-worker-config-dashboard-1564faa54d0e75f0e1c6ed264c64a131-14127.png 345w,\n/static/festtribe-worker-config-dashboard-1564faa54d0e75f0e1c6ed264c64a131-ad1f0.png 690w,\n/static/festtribe-worker-config-dashboard-1564faa54d0e75f0e1c6ed264c64a131-6758f.png 1035w,\n/static/festtribe-worker-config-dashboard-1564faa54d0e75f0e1c6ed264c64a131-c0f94.png 1380w,\n/static/festtribe-worker-config-dashboard-1564faa54d0e75f0e1c6ed264c64a131-721ff.png 2070w,\n/static/festtribe-worker-config-dashboard-1564faa54d0e75f0e1c6ed264c64a131-60d77.png 2878w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>To begin, go to your Elastic Beanstalk dashboard and select the environment that contains the instance(s) you would like to schedule. Click on “Configuration” on the left menu so that you see a screen that looks similar to the screenshot above.</p>\n<p>Before you make any changes to your environment, be sure to save your current configuration by clicking on the “Actions” button on the right side of the screen and selecting “Save Configuration”. It might also be a good idea for you to clone your environment before you follow these steps so that you can test out these changes before making any destructive changes to your existing application.</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 690px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 65.86538461538461%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABHElEQVQ4y52Th26GMAyEef93pCCkIrHCCnv4z5cS1KIOqKULUcbhOztemqYSBIHEcSxRFFmM4yjEvu+PQHjTNEnXddLpTtq2lXVd5b8BqZdlmYRheGaX5bm0Wktd11JV1YmiKESpUkozV0rZtbIsjz1lk7KEDMMwWCAVkClgjgL25nm2WJblW6zb9iGZAfYkSeTd+KhNdvxZGfR9f164LdmZuZk/INNlCgnkfN2ZW0VhgIgq4w3ZXuWyth2S3MWfwhJSWTLhEiRN05w+gkeE7gDy6EnIAlN1iNizhh+t9BfZF0IyABTC9/2TEDLw2cffCS8LgyF8My+HSuMjcq8v57GHZKeP5uZL/z0i5CL+5eaVaPMEXSNTeeZ3/SNeNkT7INKTjcQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Capacy Auto Scaling\"\n        title=\"\"\n        src=\"/static/auto-scaling-0385ba324b60ddcaf3a47ed34d3a65dc-ad1f0.png\"\n        srcset=\"/static/auto-scaling-0385ba324b60ddcaf3a47ed34d3a65dc-71707.png 173w,\n/static/auto-scaling-0385ba324b60ddcaf3a47ed34d3a65dc-14127.png 345w,\n/static/auto-scaling-0385ba324b60ddcaf3a47ed34d3a65dc-ad1f0.png 690w,\n/static/auto-scaling-0385ba324b60ddcaf3a47ed34d3a65dc-6758f.png 1035w,\n/static/auto-scaling-0385ba324b60ddcaf3a47ed34d3a65dc-c0f94.png 1380w,\n/static/auto-scaling-0385ba324b60ddcaf3a47ed34d3a65dc-6a85d.png 1664w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>Click on the “Modify” link for the Capacity setting. Set your “Environment Type” to “Load balanced” and determine the maximum and minimum number of instances you want to run. I chose 0 for the min and 1 for the max since I only need to run one instance for when the job is running, and won’t need to run any instances when the job isn’t running.</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 690px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 76.48428405122235%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAABRElEQVQ4y5WTiY6EIBBE+f/vNO544X0fvT6ybdCd0QxJBxGorqpuTNu2EiexRFEkfd+LP7Zt+zrMsiwyDIOLJEmEBHmeS1VVwt48zzJN05HgmlDndV1dmOsBLhdFIWVZSl3XR7RN45I1+6zRdZ37T2IdRrPwUxlaa91hwMdxdFawDwNmDV37TI2/YBMQ5MIKFnwD+jQUx/gLLsIQELKrfwp4V4wTQw1kIo8Cwc4/eC3Ip2H8gwASVVVKHMeH+ST4zPCNZGS5Su5y+YYlazWeuHHvxN4B4pW2B2B4SMVhqyx13xXsr1gQ8G05AGHAJoE8Ghtg+vEqlbPvinECJBue8fyaHRRm9GIYhif/7trlJBlmsNGGZp1lmbx+Xsf7fmqXfx4qoL5lfEvT9HLpuXXMuEtCrrXZXojUMSQBRQmCwBXim178BVxbmn9RiONPAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Scaling Triggers\"\n        title=\"\"\n        src=\"/static/scaling-triggers-f349d3a0a4618336eb581274b6c3d549-ad1f0.png\"\n        srcset=\"/static/scaling-triggers-f349d3a0a4618336eb581274b6c3d549-71707.png 173w,\n/static/scaling-triggers-f349d3a0a4618336eb581274b6c3d549-14127.png 345w,\n/static/scaling-triggers-f349d3a0a4618336eb581274b6c3d549-ad1f0.png 690w,\n/static/scaling-triggers-f349d3a0a4618336eb581274b6c3d549-6758f.png 1035w,\n/static/scaling-triggers-f349d3a0a4618336eb581274b6c3d549-c0f94.png 1380w,\n/static/scaling-triggers-f349d3a0a4618336eb581274b6c3d549-e028a.png 1718w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>Change the “Scale up increment” and “Scale down increment” to 0 since we won’t need to auto-scale based on any of the given parameters. We only need to scale based on the times we enter under the “Time-based Scaling” section.</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 690px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 35.06711409395973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA50lEQVQoz5WRXW6FIBCF2f9q+twt9LEbsMYfVK5WAUFAT525l8TetE16ki9njDAMBzFNE6qqQtu20FpjXVcYY2CthVkDtpBwHAf2fWe/1uTPCJzatg3zPHMTcmpM7n3AfyWsNZDDhEXfp6LmIQT2GCPX+Tv/896zj+OIYRjQ9z3quuZa0CTFRwmlbryAIrgipWQoEqLrOhRFgbIs0TQNNyOk7NgF3fumFF+R9JxJSoknJafcnHM8iTr3EDF+j0XkTT8F/Bu0ng96kFLEcj6gdhGCTs3Kr/gXV/m449M4LNOAl7car+8KXxtEIAy68hQ+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Time Based Scaling\"\n        title=\"\"\n        src=\"/static/time-based-scaling-4f28e1f9c50d7f8b1945ecea84bbfde9-ad1f0.png\"\n        srcset=\"/static/time-based-scaling-4f28e1f9c50d7f8b1945ecea84bbfde9-71707.png 173w,\n/static/time-based-scaling-4f28e1f9c50d7f8b1945ecea84bbfde9-14127.png 345w,\n/static/time-based-scaling-4f28e1f9c50d7f8b1945ecea84bbfde9-ad1f0.png 690w,\n/static/time-based-scaling-4f28e1f9c50d7f8b1945ecea84bbfde9-6758f.png 1035w,\n/static/time-based-scaling-4f28e1f9c50d7f8b1945ecea84bbfde9-c0f94.png 1380w,\n/static/time-based-scaling-4f28e1f9c50d7f8b1945ecea84bbfde9-721ff.png 2070w,\n/static/time-based-scaling-4f28e1f9c50d7f8b1945ecea84bbfde9-4da35.png 2384w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>Click on the “Add scheduled action” button and create an action with settings similar to the screenshot below. This will be the action that tells AWS when you want your instance to start running. The cron schedule of <code class=\"language-text\">0 15 * * *</code> will make this action start at 15:00 UTC everyday. Note that you can leave the “End time” field empty. Click the “Save” button when you’re finished.</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 690px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 73.06226175349428%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAABj0lEQVQ4y4VT226EIBT0F/tj/as+NX3oJWnSp/bFXbWoeEMRmDJs2HVT2TWZAALDzLlkQggURYGqqtC2Le59zrldxL1sWRbM8xwwDAO01mE+TRO4Z4y5QoowItu+TsJxHNF1HcqyDHOS8JF1XQOimtSXxQNURBKSKqXCxb7vg0pr7T/bKfvZdpMKqIaxlFKiruswUjHJqTiSp5QGy1QUlVERQXJe3ouhp0smJot2mek8zwMx10xMOl5uFzx+FUNaJVHX9X4uvf01HKJLR7jbIOmZkGRF4TM7STTdC5R+g3Yf0PaCxbzvgP9foc33xTJJTzGyPnYLWumtjwXU/It+OEJ2uccBi669hh7GdrBuC+kxXZcNE9I0TRhr0aIqhe8eASEa6MWgqX225QCzuksYd7roTMjYsQ1JqNTkS2QImKbR7ymIWviE9cFJKsvWbjqFZcK6IzHnsR1jazLGrMUT4Y1OiXXHgo5tlkIs/HgnPOah5gVyUPg6DMhYdxFUsF3fw+jRyB4/xwZPn0c8PD7jD8aQlL7t0Z/HAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"Scheduled Action\"\n        title=\"\"\n        src=\"/static/scheduled-action-1b4021ae63537c1e4f780817319a04d1-ad1f0.png\"\n        srcset=\"/static/scheduled-action-1b4021ae63537c1e4f780817319a04d1-71707.png 173w,\n/static/scheduled-action-1b4021ae63537c1e4f780817319a04d1-14127.png 345w,\n/static/scheduled-action-1b4021ae63537c1e4f780817319a04d1-ad1f0.png 690w,\n/static/scheduled-action-1b4021ae63537c1e4f780817319a04d1-6758f.png 1035w,\n/static/scheduled-action-1b4021ae63537c1e4f780817319a04d1-c0f94.png 1380w,\n/static/scheduled-action-1b4021ae63537c1e4f780817319a04d1-aa1b5.png 1574w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>Create another Scheduled Action with similar settings to create an action that tells AWS when you want your instance to <em>stop</em> running. I changed the “Name” of the action to “InvokeSleep”, min and max instances to zero, and “Recurrence” to <code class=\"language-text\">0 16 * * *</code> so that the instance is running one hour per day (15:00 to 16:00 UTC).</p>\n<p>Once you’re happy with your scheduled actions, click on the “Apply” button and these changes should take into effect! Note that you’ll need to wait for the “Next occurrence” of these actions to notice any differences. You can check how many instances are running by looking at the “Current status” field under the Time-based Scaling section. Your environment health will show “No data” when no instances are running.</p>\n<p>\n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; ; max-width: 690px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 56.424581005586596%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABLklEQVQoz51SPY+CQBDdv0thSWOltRUFDYm1iTXlcT2hpSAmItEzAqEA+ZCAyztnL0s4BZO7SV5mMpt97+3MsjzP4fs+DocA/n6P4/EIzjv8N1h9uyEMQ0RR1GfOObqOi/xXsDGV+/2Otm3RNI0A1dST+BHsRB72CYwOxvAcskeZROq6FkIvT54io9mapontdovz+dyTEYnrurBtG3Ec930J9uxCEhqGAUVRMJvNsFwukaap6JOz7HoVgmVVvdxjY88i5dVqBcdx4HkeNE0TNUVRFPh6OD6dTrhcwl/3Jglp2LquQ1VVzOdzLBYLJEnSE2ZZhrIsUT0c0jyHd9nU8Ilgs9lgvV5jt9v12w+CAJZl4cP6FK5JYJJwuMkxIbkUWcuv8pZwSDr8sO9iaOAbQk5L1Irvb4AAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"No Data Health\"\n        title=\"\"\n        src=\"/static/no-data-health-5d9c2d8166fad31937e53f0350fc26aa-ad1f0.png\"\n        srcset=\"/static/no-data-health-5d9c2d8166fad31937e53f0350fc26aa-71707.png 173w,\n/static/no-data-health-5d9c2d8166fad31937e53f0350fc26aa-14127.png 345w,\n/static/no-data-health-5d9c2d8166fad31937e53f0350fc26aa-ad1f0.png 690w,\n/static/no-data-health-5d9c2d8166fad31937e53f0350fc26aa-c163f.png 716w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n      />\n    </span>\n  </span>\n  </p>\n<p>That’s it! Hope you found this useful. Feel free to leave a comment or <a href=\"https://www.twitter.com/lVlars\">reach out on twitter</a> if you have any questions.</p>","fileAbsolutePath":"/home/travis/build/marcelkooi/marcelkooi.github.io/src/content/posts/2018-9-27___scheduling-aws-ec2-instances-on-elastic-beanstalk/index.md","excerpt":"This guide is going to show you a simple way to schedule your AWS EC2 instances for applications using Elastic Beanstalk. Doing this allows…","fields":{"slug":"/scheduling-aws-ec2-instances-on-elastic-beanstalk/","prefix":"2018-9-27"},"frontmatter":{"title":"Scheduling AWS EC2 instances on Elastic Beanstalk","categories":["tech"]}},"author":{"html":"<p><strong>Marcel Kooi</strong> - I’m a full-stack software developer. Follow me at <a href=\"https://twitter.com/lVlars\">@lVlars</a> and <a href=\"https://instagram.com/marcelkooi_\">@marcelkooi_</a>.</p>"},"footerLinks":{"html":"<ul>\n<li><a href=\"https://github.com/marcelkooi\" target=\"_blank\">GitHub</a></li>\n<li><a href=\"https://linkedin.com/in/marcel-kooi\" target=\"_blank\">LinkedIn</a></li>\n</ul>"},"copyright":{"html":"<p>Copyright 2019 Marcel Kooi</p>"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/scheduling-aws-ec2-instances-on-elastic-beanstalk/","prev":{"fileAbsolutePath":"/home/travis/build/marcelkooi/marcelkooi.github.io/src/content/posts/2018-9-12___first-post/index.md","fields":{"slug":"/first-post/","prefix":"2018-9-12","source":"posts"},"frontmatter":{"title":"First Post","categories":["habits"]}}}}}